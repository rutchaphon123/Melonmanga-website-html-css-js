function queryFormat(value, key) {
  if (value !== null && typeof value === 'object') return query(value, key);else return encodeURIComponent(key) + '=' + encodeURIComponent(value);
}

function query(params) {
  let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  const str = [];

  for (const param in params) {
    if (Object.prototype.hasOwnProperty.call(params, param)) {
      str.push(queryFormat(params[param], prefix ? `${prefix}[${param}]` : param));
    }
  }

  return str.join('&');
}

export { query };
